diff --git a/node_modules/react-native-multi-ble-peripheral/android/src/main/java/com/fugood/reactnativemultibleperipheral/ReactNativeMultiBlePeripheralModule.kt b/node_modules/react-native-multi-ble-peripheral/android/src/main/java/com/fugood/reactnativemultibleperipheral/ReactNativeMultiBlePeripheralModule.kt
index d3d31af..babde18 100644
--- a/node_modules/react-native-multi-ble-peripheral/android/src/main/java/com/fugood/reactnativemultibleperipheral/ReactNativeMultiBlePeripheralModule.kt
+++ b/node_modules/react-native-multi-ble-peripheral/android/src/main/java/com/fugood/reactnativemultibleperipheral/ReactNativeMultiBlePeripheralModule.kt
@@ -241,7 +241,8 @@ class ReactNativeMultiBlePeripheralModule(reactContext: ReactApplicationContext)
       val response = bluetoothGattServer.notifyCharacteristicChanged(
         device,
         characteristic,
-        confirm
+        confirm,
+        value
       )
     }
     promise.resolve(null)
@@ -445,13 +446,21 @@ class ReactNativeMultiBlePeripheralModule(reactContext: ReactApplicationContext)
       )
     }
     if (advServices != null) {
-      for (service in advServices.getEntryIterator()) {
-        val uuid = UUID.fromString(service.key)
-        if (service.value is String) {
-          val data = Base64.decode(service.value as String, Base64.DEFAULT)
-          advertiseDataBuilder.addServiceData(ParcelUuid(uuid), data)
+      // React Native ReadableMap does not support entrySet or getEntryIterator, so use keySetIterator for compatibility
+      val keyIter = advServices.keySetIterator()
+      while (keyIter.hasNextKey()) {
+        val key = keyIter.nextKey()
+        try {
+          val maybeValue = advServices.getString(key)
+          val uuid = UUID.fromString(key)
+          if (maybeValue != null) {
+            val data = Base64.decode(maybeValue, Base64.DEFAULT)
+            advertiseDataBuilder.addServiceData(ParcelUuid(uuid), data)
+          }
+          advertiseDataBuilder.addServiceUuid(ParcelUuid(uuid))
+        } catch (e: Exception) {
+          Log.w(NAME, "Invalid advertise service entry: $key - ${e.message}")
         }
-        advertiseDataBuilder.addServiceUuid(ParcelUuid(uuid))
       }
     }
 
